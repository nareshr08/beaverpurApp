<!DOCTYPE html>
<html>
<head>
	<title>Registration Details</title>
	<meta charset="utf-8">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css" />
	<script src="../javascript/jquery/jquery-1.10.2.min.js"></script>
	<script src="../javascript/jquery/jquery.mobile-1.4.0.min.js"></script>
	<script src="../javascript/tennisStore.js"></script>
	<script src="../javascript/jquery/jquery.validate.js"></script>
	<style>
	label.error { 
		float: left; 
		color: red; 
		padding-top: .5em; 
		vertical-align: top; 
		font-weight:bold
	}
	</style>
</head>
<script type="text/javascript">
	$(document).ready(function() {
		$("#doublesRegistration").validate();

		$('#submitButton').click(function(){
			$('#query').val('reportScore');
			//validate form fields
			var hasErrors = false;
			var player1InfoMissing = false;
			var player2InfoMissing = false;
			$('form input[type="text"]').each(function(){
				var currentValue = $(this).val();
				var currentAttr = $(this).attr('id');
				$(this).css("background-color","");
				if (!currentValue || currentValue ==''){
					$(this).css("background-color","red");
					hasErrors = true;
					if (!player1InfoMissing && currentAttr.indexOf('player1')>-1){
						player1InfoMissing = true;
					}else if (!player2InfoMissing && currentAttr.indexOf('player2')>-1){
						player2InfoMissing = true;
					}
				}
			});
			$('form input[type="number"]').each(function(){
				var currentValue = $(this).val();
				var currentAttr = $(this).attr('id');
				$(this).css("background-color","");
				if (!currentValue || currentValue ==''){
					$(this).css("background-color","red");
					hasErrors = true;
					if (!player1InfoMissing && currentAttr.indexOf('player1')>-1){
						player1InfoMissing = true;
					}else if (!player2InfoMissing && currentAttr.indexOf('player2')>-1){
						player2InfoMissing = true;
					}
				}
			});
			$('form input[type="email"]').each(function(){
				var currentValue = $(this).val();
				var currentAttr = $(this).attr('id');
				$(this).css("background-color","");
				if (!currentValue || currentValue ==''){
					$(this).css("background-color","red");
					hasErrors = true;
					if (!player1InfoMissing && currentAttr.indexOf('player1')>-1){
						player1InfoMissing = true;
					}else if (!player2InfoMissing && currentAttr.indexOf('player2')>-1){
						player2InfoMissing = true;
					}
				}
			});
			if (hasErrors && player1InfoMissing){
				alert('Some information missing for Player1');
				return false;
			}else if (hasErrors && player2InfoMissing){
				alert('Some information missing for Player2');
				return false;
			}else if (hasErrors){
				alert('Team Name is required');
				return false;
			}
		});
	});
</script>
<body>
	<div>
		<div data-role="page" data-content-theme="a" id="doublesRegistration" data-title="Registrations for Season 2018">
			<div data-role="header" data-content-theme="a"
				data-add-back-btn="true">
				<a href="#" data-rel="back" data-icon="arrow-l" data-theme="c">Back</a>
				<h6 style="font-size:15px;">Registration Form</h6>
			</div>
			<div data-role="content" data-theme="a">
				<form action="/doublesRegistration" id="doublesRegistrationForm">
					<fieldset data-role="fieldcontain">
						<label for="teamName">Team Name:</label>
						<input type="text" name="teamName" id="teamName" class="required" value=""/>
					</fieldset>
					<fieldset data-role="fieldcontain">
						<label for="teamAvailability">Availability of your Team:</label>
						<select name="teamAvailability" id="teamAvailability">
							<option value="Available most times">Available most times</option>
							<option value="Have business travel during most weekdays">Have business travel during most weekdays</option>
							<option value="Can't play weekends">Can't play weekends</option>
							<option value="Can play only on weekends">Can play only on weekends</option>
						</select>
						<label for="teamAvailability">*Will be useful to teams in your group to schedule game</label>
					</fieldset>
					<div data-role="tabs" id="tabs">
  						<div data-role="navbar">
    						<ul>
						      <li><a href="#player1Info" class="ui-btn-active" data-ajax="false">Player1 Info</a></li>
						      <li><a href="#player2Info" data-ajax="false">Player2 Info</a></li>
						    </ul>
						</div>
  						<div id="player1Info">
							<fieldset data-role="fieldcontain">
								<label for="player1Name">Name:</label>
								<input type="text" name="player1Name" id="player1Name" class="required" value=""/>
							</fieldset>
							<fieldset data-role="fieldcontain">
								<label for="player1EmailAddress">Email Address:</label>
								<input type="email" name="player1EmailAddress" placeholder="example@company.com" class="required email" id="player1EmailAddress" value=""/>
							</fieldset>
							<fieldset data-role="fieldcontain">
								<label for="player1PhoneNumber">Phone Number:</label>
								<input type="number" name="player1PhoneNumber" required="required" placeholder="5555555555" id="player1PhoneNumber" class="required" value=""/>
							</fieldset>
							<fieldset data-role="fieldcontain">
								<label for="player1Rating">Rating (Self or USTA)*:</label>
								<select name="player1Rating" id="player1Rating">
									<option value="2.0">Beginner (2.0-2.5)</option>
									<option value="3.0">Intermediate (3.0)</option>
									<option value="3.5">Intermediate Advanced (3.5)</option>
									<option value="4.0">Advanced (4.0+)</option>
								</select>
								<!-- <label for="player1Rating">*We will use it only during group assignment</label> -->
							</fieldset>
  						</div>
  						<div id="player2Info">
							<fieldset data-role="fieldcontain">
								<label for="player2Name">First Name:</label>
								<input type="text" name="player2Name" id="player2Name" class="required" value=""/>
							</fieldset>
							<fieldset data-role="fieldcontain">
								<label for="player2EmailAddress">Email Address:</label>
								<input type="email" name="player2EmailAddress" placeholder="example@company.com" class="required email" id="player2EmailAddress" value=""/>
							</fieldset>
							<fieldset data-role="fieldcontain">
								<label for="player2PhoneNumber">Phone Number:</label>
								<input type="number" name="player2PhoneNumber" required="required" placeholder="5555555555" id="player2PhoneNumber" class="required" value=""/>
							</fieldset>
							<fieldset data-role="fieldcontain">
								<label for="player2Rating">Rating (Self or USTA)*:</label>
								<select name="player2Rating" id="player2Rating">
									<option value="2.0">Beginner (2.0-2.5)</option>
									<option value="3.0">Intermediate (3.0)</option>
									<option value="3.5">Intermediate Advanced (3.5)</option>
									<option value="4.0">Advanced (4.0+)</option>
								</select>
								<!-- <label for="player1Rating">*We will use it only during group assignment</label> -->
							</fieldset>
						</div>
					</div>
					<input type="submit" data-theme="b" name="submitButton" id="submitButton" value="Next">
					<div data-role="content" data-theme="a">
						<span>*Payment option will be provided in next screen</span>
					</div>
				</form>
			</div>
		</div>
	</div>
</body>
</html>